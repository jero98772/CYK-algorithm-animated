<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYK Algorithm Animation</title>
    <style>
                body {
            background-image: url('https://raw.githubusercontent.com/jero98772/toma_nota/master/clases/compiladores/CYKalgorithm/937if9.jpg');
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }
        .table-container {
            text-align: center;
        }
        .table {
            display: inline-block;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        .cell {
            width: 100px;
            height: 60px;
            border: 1px solid #ccc;
            text-align: center;
            vertical-align: middle;
            line-height: 60px;
            transition: background-color 0.3s;
            background-color: #fff;
        }
        .cell.active {
            background-color: #e0e0e0;
        }
        .cell.highlight {
            background-color: #ffeb3b;
        }
        .header {
            font-weight: bold;
            margin-bottom: 10px;
        }
        .transparent-bg {
            background-color: rgba(255, 255, 255, 0.8); /* White background with 80% opacity */
            border-radius: 0.25rem; /* Optional: Adds rounded corners */
        }

    </style>
</head>
<body background-image="https://raw.githubusercontent.com/jero98772/toma_nota/master/clases/compiladores/CYKalgorithm/937if9.jpg">

    <div class="transparent-bg p-4">
        <div class="table-container" >
            <div class="header"><h1>CYK Algorithm Animation</h1></div>
            <h2>String can be generated by the grammar?: no</h2>
            <table id="cyk-table" class="table"></table>
            <button onclick="startAnimation()">Start Animation</button>
        </div>
    </div>
    <script>
        // CYK Algorithm
        const R = {'S': ['AB', 'AC', 'SS'], 'C': ['SB'], 'A': ['a'], 'B': ['b']};
        const input = "aabab";

        function cykParse(grammar, inputString) {
            const n = inputString.length;
            const table = Array.from({ length: n }, () => Array.from({ length: n }, () => new Set()));

            // Fill the base case (terminals in the input string)
            for (let i = 0; i < n; i++) {
                for (const nonterminal in grammar) {
                    const productions = grammar[nonterminal];
                    for (const production of productions) {
                        // Check if the production contains a terminal symbol
                        if (production.includes(inputString[i])) {
                            table[i][i].add(nonterminal);
                        }
                    }
                }
            }

            // Fill the table for substrings of length 2 to n
            for (let length = 2; length <= n; length++) {
                for (let i = 0; i <= n - length; i++) {
                    let j = i + length - 1;
                    for (let k = i; k < j; k++) {
                        for (const nonterminal in grammar) {
                            const productions = grammar[nonterminal];
                            for (const production of productions) {
                                if (production.length === 2) {
                                    const B = production[0][0]; // First part of the production (nonterminal)
                                    const C = production[0][1]; // Second part of the production (nonterminal/terminal)
                                    if (table[i][k].has(B) && table[k + 1][j].has(C)) {
                                        table[i][j].add(nonterminal);
                                    }
                                }
                            }
                        }
                    }
                }
            }

            return table;
        }

        const T = cykParse(R, input);

        const buildTable = () => {
            const table = document.getElementById('cyk-table');
            table.innerHTML = '';
            let html = '';
            for (let i = 0; i < input.length; i++) {
                html += '<tr>';
                for (let j = 0; j < input.length; j++) {
                    html += `<td class="cell" id="cell-${i}-${j}"></td>`;
                }
                html += '</tr>';
            }
            table.innerHTML = html;
        };

        const fillTable = () => {
            const table = document.getElementById('cyk-table');
            let step = 0;
            const maxSteps = input.length * input.length;

            const interval = setInterval(() => {
                if (step >= maxSteps) {
                    clearInterval(interval);
                    return;
                }

                const row = Math.floor(step / input.length);
                const col = step % input.length;

                const cell = document.getElementById(`cell-${row}-${col}`);
                cell.textContent = Array.from(T[row][col]).join(', ');
                cell.classList.add('active');
                step++;
            }, 1000);
        };

        const startAnimation = () => {
            buildTable();
            fillTable();
        };
    </script>
</body>
</html>

